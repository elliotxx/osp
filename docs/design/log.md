# OSP 日志框架设计

## 概述

OSP 的日志框架提供了一个简单但功能强大的日志系统，支持：
- 分级日志
- 层级输出
- 颜色显示
- 自定义前缀
- 链式调用

## 日志级别

支持五种内置的日志级别，每个级别都有自己的前缀符号和颜色：

| 级别 | 前缀 | 颜色 | 说明 |
|------|-----|------|-----|
| Debug | + | 浅灰色 | 调试信息（仅在详细模式下显示）|
| Info | » | 蓝色 | 普通信息 |
| Warn | ! | 黄色 | 警告信息 |
| Success | ✓ | 绿色 | 成功信息 |
| Error | × | 红色 | 错误信息 |

## 核心功能

### 1. 层级输出

通过 `L(level)` 设置缩进级别，每级缩进两个空格：

```go
log.L(1).Info("子消息")
// 输出：  » 子消息
```

### 2. 自定义前缀

通过 `P(prefix)` 设置自定义前缀：

```go
log.L(1).P("→").Log("处理中")
// 输出：  → 处理中
```

### 3. 颜色支持

通过 `C(color)` 设置颜色，支持以下颜色：
- ColorReset（重置颜色）
- ColorRed（红色）
- ColorGreen（绿色）
- ColorYellow（黄色）
- ColorBlue（蓝色）
- ColorPurple（紫色）
- ColorCyan（青色）
- ColorGray（浅灰色）

### 4. 文本样式

- 通过 `B()` 设置粗体
- 通过 `N()` 禁用换行
- 通过 `Bold(text)` 包装部分文本为粗体

## 实现细节

### Logger 结构

```go
type Logger struct {
    level     int    // 缩进级别
    prefix    string // 前缀符号
    color     string // ANSI 颜色代码
    noNewline bool   // 是否禁用换行
}
```

### 全局设置

```go
// 设置详细模式（是否显示 Debug 日志）
SetVerbose(v bool)

// 设置是否禁用颜色输出
SetNoColor(disable bool)
```

### 链式调用

所有日志方法都返回新的 Logger 实例，支持链式调用：

```go
log.Info("发现 2 个项目").
    L(1).P("→").C(log.ColorCyan).Log("处理项目 1").
    L(1).Success("项目 1 已处理").
    L(1).P("→").C(log.ColorCyan).Log("处理项目 2").
    L(1).Error("项目 2 处理失败")

// 输出：
// » 发现 2 个项目
//   → 处理项目 1
//   ✓ 项目 1 已处理
//   → 处理项目 2
//   × 项目 2 处理失败
```

## 最佳实践

1. 日志级别使用
   - Debug：调试信息，仅在详细模式下显示
   - Info：常规操作和状态信息
   - Warn：需要注意但不影响运行的问题
   - Success：操作成功的确认信息
   - Error：错误和失败信息

2. 层级使用
   - 使用层级表示操作的从属关系
   - 每个子操作增加一级缩进
   - 保持层级结构清晰

3. 颜色使用
   - 使用颜色增强可读性
   - 保持颜色含义一致性
   - 考虑无颜色环境的可读性

4. 前缀使用
   - 使用直观的符号作为前缀
   - 保持前缀风格统一
   - 避免使用过于复杂的符号

## 使用示例

### 1. 基本日志
```go
log.Info("处理项目 %d", 1)
// 输出：» 处理项目 1
```

### 2. 层级日志
```go
log.Info("主任务").
    L(1).Log("子任务 1").
    L(1).Log("子任务 2")
// 输出：
// » 主任务
//   子任务 1
//   子任务 2
```

### 3. 自定义样式
```go
log.B().C(log.ColorRed).Error("严重错误：%s", log.Bold("权限不足"))
// 输出：× 严重错误：权限不足（红色加粗）
```

### 4. 进度显示
```go
log.N().Info("请输入用户名：")
// 输出：» 请输入用户名：（无换行）
```
